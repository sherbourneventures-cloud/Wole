{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":31,"index":31}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"./WebBarcodeScanner","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":32},"end":{"line":2,"column":57,"index":89}}],"key":"4yLwPj+mkqiDpIVxbp7S7P/HB/o=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  exports.useWebBarcodeScanner = useWebBarcodeScanner;\n  var _react = require(_dependencyMap[0], \"react\");\n  var React = _interopNamespace(_react);\n  var _WebBarcodeScanner = require(_dependencyMap[1], \"./WebBarcodeScanner\");\n  var WebBarcodeScanner = _interopNamespace(_WebBarcodeScanner);\n  function mapToViewCoordinates(result, videoWidth, viewHeight, height, width, isMirrored) {\n    const scaleX = width / videoWidth;\n    const scaleY = viewHeight / height;\n    const mapPoint = p => {\n      const x = isMirrored ? width - p.x * scaleX : p.x * scaleX;\n      const y = p.y * scaleY;\n      return {\n        x,\n        y\n      };\n    };\n    const origin = mapPoint(result.bounds.origin);\n    const size = {\n      width: result.bounds.size.width * scaleX,\n      height: result.bounds.size.height * scaleY\n    };\n    if (isMirrored) {\n      origin.x -= size.width;\n    }\n    return {\n      ...result,\n      bounds: {\n        origin,\n        size\n      },\n      cornerPoints: result.cornerPoints.map(mapPoint)\n    };\n  }\n  function useWebBarcodeScanner(video, {\n    isEnabled,\n    barcodeTypes,\n    interval,\n    isMirrored = false,\n    onScanned,\n    onError\n  }) {\n    const isRunning = React.useRef(false);\n    const timeout = React.useRef(undefined);\n    async function scanAsync() {\n      if (!isRunning.current || !onScanned) {\n        stop();\n        return;\n      }\n      try {\n        const videoEl = video.current;\n        if (!videoEl || videoEl.readyState !== videoEl.HAVE_ENOUGH_DATA) {\n          return;\n        }\n        const {\n          videoWidth,\n          videoHeight\n        } = videoEl;\n        if (!videoWidth || !videoHeight) {\n          return;\n        }\n        const bitmap = await createImageBitmap(videoEl);\n        const results = await WebBarcodeScanner.detect(bitmap, barcodeTypes);\n        bitmap.close();\n        const viewWidth = videoEl.clientWidth || videoWidth;\n        const viewHeight = videoEl.clientHeight || videoHeight;\n        for (const raw of results) {\n          const nativeEvent = mapToViewCoordinates(raw, videoWidth, videoHeight, viewWidth, viewHeight, isMirrored);\n          onScanned({\n            nativeEvent\n          });\n        }\n      } catch (error) {\n        if (onError) {\n          onError({\n            nativeEvent: error\n          });\n        }\n      } finally {\n        if (interval === 0) {\n          stop();\n          return;\n        }\n        const intervalToUse = !interval || interval < 0 ? 16 : interval;\n        timeout.current = setTimeout(() => {\n          scanAsync();\n        }, intervalToUse);\n      }\n    }\n    function stop() {\n      isRunning.current = false;\n      clearTimeout(timeout.current);\n    }\n    React.useEffect(() => {\n      if (isEnabled) {\n        isRunning.current = true;\n        scanAsync();\n      }\n      return () => {\n        if (isEnabled) {\n          stop();\n        }\n      };\n    }, [isEnabled]);\n  }\n});","lineCount":126,"map":[[22,2,25,0,"exports"],[22,9,25,0],[22,10,25,0,"useWebBarcodeScanner"],[22,30,25,0],[22,33,25,0,"useWebBarcodeScanner"],[22,53,25,0],[23,2,1,0],[23,6,1,0,"_react"],[23,12,1,0],[23,15,1,0,"require"],[23,22,1,0],[23,23,1,0,"_dependencyMap"],[23,37,1,0],[24,2,1,0],[24,6,1,0,"React"],[24,11,1,0],[24,14,1,0,"_interopNamespace"],[24,31,1,0],[24,32,1,0,"_react"],[24,38,1,0],[25,2,2,0],[25,6,2,0,"_WebBarcodeScanner"],[25,24,2,0],[25,27,2,0,"require"],[25,34,2,0],[25,35,2,0,"_dependencyMap"],[25,49,2,0],[26,2,2,0],[26,6,2,0,"WebBarcodeScanner"],[26,23,2,0],[26,26,2,0,"_interopNamespace"],[26,43,2,0],[26,44,2,0,"_WebBarcodeScanner"],[26,62,2,0],[27,2,3,0],[27,11,3,9,"mapToViewCoordinates"],[27,31,3,29,"mapToViewCoordinates"],[27,32,3,30,"result"],[27,38,3,36],[27,40,3,38,"videoWidth"],[27,50,3,48],[27,52,3,50,"viewHeight"],[27,62,3,60],[27,64,3,62,"height"],[27,70,3,68],[27,72,3,70,"width"],[27,77,3,75],[27,79,3,77,"isMirrored"],[27,89,3,87],[27,91,3,89],[28,4,4,4],[28,10,4,10,"scaleX"],[28,16,4,16],[28,19,4,19,"width"],[28,24,4,24],[28,27,4,27,"videoWidth"],[28,37,4,37],[29,4,5,4],[29,10,5,10,"scaleY"],[29,16,5,16],[29,19,5,19,"viewHeight"],[29,29,5,29],[29,32,5,32,"height"],[29,38,5,38],[30,4,6,4],[30,10,6,10,"mapPoint"],[30,18,6,18],[30,21,6,22,"p"],[30,22,6,23],[30,26,6,28],[31,6,7,8],[31,12,7,14,"x"],[31,13,7,15],[31,16,7,18,"isMirrored"],[31,26,7,28],[31,29,7,31,"width"],[31,34,7,36],[31,37,7,39,"p"],[31,38,7,40],[31,39,7,41,"x"],[31,40,7,42],[31,43,7,45,"scaleX"],[31,49,7,51],[31,52,7,54,"p"],[31,53,7,55],[31,54,7,56,"x"],[31,55,7,57],[31,58,7,60,"scaleX"],[31,64,7,66],[32,6,8,8],[32,12,8,14,"y"],[32,13,8,15],[32,16,8,18,"p"],[32,17,8,19],[32,18,8,20,"y"],[32,19,8,21],[32,22,8,24,"scaleY"],[32,28,8,30],[33,6,9,8],[33,13,9,15],[34,8,9,17,"x"],[34,9,9,18],[35,8,9,20,"y"],[36,6,9,22],[36,7,9,23],[37,4,10,4],[37,5,10,5],[38,4,11,4],[38,10,11,10,"origin"],[38,16,11,16],[38,19,11,19,"mapPoint"],[38,27,11,27],[38,28,11,28,"result"],[38,34,11,34],[38,35,11,35,"bounds"],[38,41,11,41],[38,42,11,42,"origin"],[38,48,11,48],[38,49,11,49],[39,4,12,4],[39,10,12,10,"size"],[39,14,12,14],[39,17,12,17],[40,6,13,8,"width"],[40,11,13,13],[40,13,13,15,"result"],[40,19,13,21],[40,20,13,22,"bounds"],[40,26,13,28],[40,27,13,29,"size"],[40,31,13,33],[40,32,13,34,"width"],[40,37,13,39],[40,40,13,42,"scaleX"],[40,46,13,48],[41,6,14,8,"height"],[41,12,14,14],[41,14,14,16,"result"],[41,20,14,22],[41,21,14,23,"bounds"],[41,27,14,29],[41,28,14,30,"size"],[41,32,14,34],[41,33,14,35,"height"],[41,39,14,41],[41,42,14,44,"scaleY"],[42,4,15,4],[42,5,15,5],[43,4,16,4],[43,8,16,8,"isMirrored"],[43,18,16,18],[43,20,16,20],[44,6,17,8,"origin"],[44,12,17,14],[44,13,17,15,"x"],[44,14,17,16],[44,18,17,20,"size"],[44,22,17,24],[44,23,17,25,"width"],[44,28,17,30],[45,4,18,4],[46,4,19,4],[46,11,19,11],[47,6,20,8],[47,9,20,11,"result"],[47,15,20,17],[48,6,21,8,"bounds"],[48,12,21,14],[48,14,21,16],[49,8,21,18,"origin"],[49,14,21,24],[50,8,21,26,"size"],[51,6,21,31],[51,7,21,32],[52,6,22,8,"cornerPoints"],[52,18,22,20],[52,20,22,22,"result"],[52,26,22,28],[52,27,22,29,"cornerPoints"],[52,39,22,41],[52,40,22,42,"map"],[52,43,22,45],[52,44,22,46,"mapPoint"],[52,52,22,54],[53,4,23,4],[53,5,23,5],[54,2,24,0],[55,2,25,7],[55,11,25,16,"useWebBarcodeScanner"],[55,31,25,36,"useWebBarcodeScanner"],[55,32,25,37,"video"],[55,37,25,42],[55,39,25,44],[56,4,25,46,"isEnabled"],[56,13,25,55],[57,4,25,57,"barcodeTypes"],[57,16,25,69],[58,4,25,71,"interval"],[58,12,25,79],[59,4,25,81,"isMirrored"],[59,14,25,91],[59,17,25,94],[59,22,25,99],[60,4,25,101,"onScanned"],[60,13,25,110],[61,4,25,112,"onError"],[62,2,25,121],[62,3,25,122],[62,5,25,124],[63,4,26,4],[63,10,26,10,"isRunning"],[63,19,26,19],[63,22,26,22,"React"],[63,27,26,27],[63,28,26,28,"useRef"],[63,34,26,34],[63,35,26,35],[63,40,26,40],[63,41,26,41],[64,4,27,4],[64,10,27,10,"timeout"],[64,17,27,17],[64,20,27,20,"React"],[64,25,27,25],[64,26,27,26,"useRef"],[64,32,27,32],[64,33,27,33,"undefined"],[64,42,27,42],[64,43,27,43],[65,4,28,4],[65,19,28,19,"scanAsync"],[65,28,28,28,"scanAsync"],[65,29,28,28],[65,31,28,31],[66,6,29,8],[66,10,29,12],[66,11,29,13,"isRunning"],[66,20,29,22],[66,21,29,23,"current"],[66,28,29,30],[66,32,29,34],[66,33,29,35,"onScanned"],[66,42,29,44],[66,44,29,46],[67,8,30,12,"stop"],[67,12,30,16],[67,13,30,17],[67,14,30,18],[68,8,31,12],[69,6,32,8],[70,6,33,8],[70,10,33,12],[71,8,34,12],[71,14,34,18,"videoEl"],[71,21,34,25],[71,24,34,28,"video"],[71,29,34,33],[71,30,34,34,"current"],[71,37,34,41],[72,8,35,12],[72,12,35,16],[72,13,35,17,"videoEl"],[72,20,35,24],[72,24,35,28,"videoEl"],[72,31,35,35],[72,32,35,36,"readyState"],[72,42,35,46],[72,47,35,51,"videoEl"],[72,54,35,58],[72,55,35,59,"HAVE_ENOUGH_DATA"],[72,71,35,75],[72,73,35,77],[73,10,36,16],[74,8,37,12],[75,8,38,12],[75,14,38,18],[76,10,38,20,"videoWidth"],[76,20,38,30],[77,10,38,32,"videoHeight"],[78,8,38,44],[78,9,38,45],[78,12,38,48,"videoEl"],[78,19,38,55],[79,8,39,12],[79,12,39,16],[79,13,39,17,"videoWidth"],[79,23,39,27],[79,27,39,31],[79,28,39,32,"videoHeight"],[79,39,39,43],[79,41,39,45],[80,10,40,16],[81,8,41,12],[82,8,42,12],[82,14,42,18,"bitmap"],[82,20,42,24],[82,23,42,27],[82,29,42,33,"createImageBitmap"],[82,46,42,50],[82,47,42,51,"videoEl"],[82,54,42,58],[82,55,42,59],[83,8,43,12],[83,14,43,18,"results"],[83,21,43,25],[83,24,43,28],[83,30,43,34,"WebBarcodeScanner"],[83,47,43,51],[83,48,43,52,"detect"],[83,54,43,58],[83,55,43,59,"bitmap"],[83,61,43,65],[83,63,43,67,"barcodeTypes"],[83,75,43,79],[83,76,43,80],[84,8,44,12,"bitmap"],[84,14,44,18],[84,15,44,19,"close"],[84,20,44,24],[84,21,44,25],[84,22,44,26],[85,8,45,12],[85,14,45,18,"viewWidth"],[85,23,45,27],[85,26,45,30,"videoEl"],[85,33,45,37],[85,34,45,38,"clientWidth"],[85,45,45,49],[85,49,45,53,"videoWidth"],[85,59,45,63],[86,8,46,12],[86,14,46,18,"viewHeight"],[86,24,46,28],[86,27,46,31,"videoEl"],[86,34,46,38],[86,35,46,39,"clientHeight"],[86,47,46,51],[86,51,46,55,"videoHeight"],[86,62,46,66],[87,8,47,12],[87,13,47,17],[87,19,47,23,"raw"],[87,22,47,26],[87,26,47,30,"results"],[87,33,47,37],[87,35,47,39],[88,10,48,16],[88,16,48,22,"nativeEvent"],[88,27,48,33],[88,30,48,36,"mapToViewCoordinates"],[88,50,48,56],[88,51,48,57,"raw"],[88,54,48,60],[88,56,48,62,"videoWidth"],[88,66,48,72],[88,68,48,74,"videoHeight"],[88,79,48,85],[88,81,48,87,"viewWidth"],[88,90,48,96],[88,92,48,98,"viewHeight"],[88,102,48,108],[88,104,48,110,"isMirrored"],[88,114,48,120],[88,115,48,121],[89,10,49,16,"onScanned"],[89,19,49,25],[89,20,49,26],[90,12,49,28,"nativeEvent"],[91,10,49,40],[91,11,49,41],[91,12,49,42],[92,8,50,12],[93,6,51,8],[93,7,51,9],[93,8,52,8],[93,15,52,15,"error"],[93,20,52,20],[93,22,52,22],[94,8,53,12],[94,12,53,16,"onError"],[94,19,53,23],[94,21,53,25],[95,10,54,16,"onError"],[95,17,54,23],[95,18,54,24],[96,12,54,26,"nativeEvent"],[96,23,54,37],[96,25,54,39,"error"],[97,10,54,45],[97,11,54,46],[97,12,54,47],[98,8,55,12],[99,6,56,8],[99,7,56,9],[99,16,57,16],[100,8,58,12],[100,12,58,16,"interval"],[100,20,58,24],[100,25,58,29],[100,26,58,30],[100,28,58,32],[101,10,59,16,"stop"],[101,14,59,20],[101,15,59,21],[101,16,59,22],[102,10,60,16],[103,8,61,12],[104,8,62,12],[104,14,62,18,"intervalToUse"],[104,27,62,31],[104,30,62,34],[104,31,62,35,"interval"],[104,39,62,43],[104,43,62,47,"interval"],[104,51,62,55],[104,54,62,58],[104,55,62,59],[104,58,62,62],[104,60,62,64],[104,63,62,67,"interval"],[104,71,62,75],[105,8,63,12,"timeout"],[105,15,63,19],[105,16,63,20,"current"],[105,23,63,27],[105,26,63,30,"setTimeout"],[105,36,63,40],[105,37,63,41],[105,43,63,47],[106,10,64,16,"scanAsync"],[106,19,64,25],[106,20,64,26],[106,21,64,27],[107,8,65,12],[107,9,65,13],[107,11,65,15,"intervalToUse"],[107,24,65,28],[107,25,65,29],[108,6,66,8],[109,4,67,4],[110,4,68,4],[110,13,68,13,"stop"],[110,17,68,17,"stop"],[110,18,68,17],[110,20,68,20],[111,6,69,8,"isRunning"],[111,15,69,17],[111,16,69,18,"current"],[111,23,69,25],[111,26,69,28],[111,31,69,33],[112,6,70,8,"clearTimeout"],[112,18,70,20],[112,19,70,21,"timeout"],[112,26,70,28],[112,27,70,29,"current"],[112,34,70,36],[112,35,70,37],[113,4,71,4],[114,4,72,4,"React"],[114,9,72,9],[114,10,72,10,"useEffect"],[114,19,72,19],[114,20,72,20],[114,26,72,26],[115,6,73,8],[115,10,73,12,"isEnabled"],[115,19,73,21],[115,21,73,23],[116,8,74,12,"isRunning"],[116,17,74,21],[116,18,74,22,"current"],[116,25,74,29],[116,28,74,32],[116,32,74,36],[117,8,75,12,"scanAsync"],[117,17,75,21],[117,18,75,22],[117,19,75,23],[118,6,76,8],[119,6,77,8],[119,13,77,15],[119,19,77,21],[120,8,78,12],[120,12,78,16,"isEnabled"],[120,21,78,25],[120,23,78,27],[121,10,79,16,"stop"],[121,14,79,20],[121,15,79,21],[121,16,79,22],[122,8,80,12],[123,6,81,8],[123,7,81,9],[124,4,82,4],[124,5,82,5],[124,7,82,7],[124,8,82,8,"isEnabled"],[124,17,82,17],[124,18,82,18],[124,19,82,19],[125,2,83,0],[126,0,83,1],[126,3]],"functionMap":{"names":["<global>","mapToViewCoordinates","mapPoint","useWebBarcodeScanner","scanAsync","setTimeout$argument_0","stop","React.useEffect$argument_0","<anonymous>"],"mappings":"AAA;ACE;qBCG;KDI;CDc;OGC;ICG;yCCmC;aDE;KDE;IGC;KHG;oBIC;eCK;SDI;KJC;CHC"},"hasCjsExports":false},"type":"js/module"}]}