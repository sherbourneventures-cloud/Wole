{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":31,"index":31}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"./WebBarcodeScanner","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":32},"end":{"line":2,"column":57,"index":89}}],"key":"4yLwPj+mkqiDpIVxbp7S7P/HB/o=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  exports.useWebBarcodeScanner = useWebBarcodeScanner;\n  var _react = require(_dependencyMap[0], \"react\");\n  var React = _interopNamespace(_react);\n  var _WebBarcodeScanner = require(_dependencyMap[1], \"./WebBarcodeScanner\");\n  var WebBarcodeScanner = _interopNamespace(_WebBarcodeScanner);\n  function mapToViewCoordinates(result, videoWidth, viewHeight, height, width, isMirrored) {\n    const scaleX = width / videoWidth;\n    const scaleY = viewHeight / height;\n    const mapPoint = p => {\n      const x = isMirrored ? width - p.x * scaleX : p.x * scaleX;\n      const y = p.y * scaleY;\n      return {\n        x,\n        y\n      };\n    };\n    const origin = mapPoint(result.bounds.origin);\n    const size = {\n      width: result.bounds.size.width * scaleX,\n      height: result.bounds.size.height * scaleY\n    };\n    if (isMirrored) {\n      origin.x -= size.width;\n    }\n    return Object.assign({}, result, {\n      bounds: {\n        origin,\n        size\n      },\n      cornerPoints: result.cornerPoints.map(mapPoint)\n    });\n  }\n  function useWebBarcodeScanner(video, {\n    isEnabled,\n    barcodeTypes,\n    interval,\n    isMirrored = false,\n    onScanned,\n    onError\n  }) {\n    const isRunning = React.useRef(false);\n    const timeout = React.useRef(undefined);\n    async function scanAsync() {\n      if (!isRunning.current || !onScanned) {\n        stop();\n        return;\n      }\n      try {\n        const videoEl = video.current;\n        if (!videoEl || videoEl.readyState !== videoEl.HAVE_ENOUGH_DATA) {\n          return;\n        }\n        const {\n          videoWidth,\n          videoHeight\n        } = videoEl;\n        if (!videoWidth || !videoHeight) {\n          return;\n        }\n        const bitmap = await createImageBitmap(videoEl);\n        const results = await WebBarcodeScanner.detect(bitmap, barcodeTypes);\n        bitmap.close();\n        const viewWidth = videoEl.clientWidth || videoWidth;\n        const viewHeight = videoEl.clientHeight || videoHeight;\n        for (const raw of results) {\n          const nativeEvent = mapToViewCoordinates(raw, videoWidth, videoHeight, viewWidth, viewHeight, isMirrored);\n          onScanned({\n            nativeEvent\n          });\n        }\n      } catch (error) {\n        if (onError) {\n          onError({\n            nativeEvent: error\n          });\n        }\n      } finally {\n        if (interval === 0) {\n          stop();\n          return;\n        }\n        const intervalToUse = !interval || interval < 0 ? 16 : interval;\n        timeout.current = setTimeout(() => {\n          scanAsync();\n        }, intervalToUse);\n      }\n    }\n    function stop() {\n      isRunning.current = false;\n      clearTimeout(timeout.current);\n    }\n    React.useEffect(() => {\n      if (isEnabled) {\n        isRunning.current = true;\n        scanAsync();\n      }\n      return () => {\n        if (isEnabled) {\n          stop();\n        }\n      };\n    }, [isEnabled]);\n  }\n});","lineCount":125,"map":[[22,2,25,0,"exports"],[22,9,25,0],[22,10,25,0,"useWebBarcodeScanner"],[22,30,25,0],[22,33,25,0,"useWebBarcodeScanner"],[22,53,25,0],[23,2,1,0],[23,6,1,0,"_react"],[23,12,1,0],[23,15,1,0,"require"],[23,22,1,0],[23,23,1,0,"_dependencyMap"],[23,37,1,0],[24,2,1,0],[24,6,1,0,"React"],[24,11,1,0],[24,14,1,0,"_interopNamespace"],[24,31,1,0],[24,32,1,0,"_react"],[24,38,1,0],[25,2,2,0],[25,6,2,0,"_WebBarcodeScanner"],[25,24,2,0],[25,27,2,0,"require"],[25,34,2,0],[25,35,2,0,"_dependencyMap"],[25,49,2,0],[26,2,2,0],[26,6,2,0,"WebBarcodeScanner"],[26,23,2,0],[26,26,2,0,"_interopNamespace"],[26,43,2,0],[26,44,2,0,"_WebBarcodeScanner"],[26,62,2,0],[27,2,3,0],[27,11,3,9,"mapToViewCoordinates"],[27,31,3,29,"mapToViewCoordinates"],[27,32,3,30,"result"],[27,38,3,36],[27,40,3,38,"videoWidth"],[27,50,3,48],[27,52,3,50,"viewHeight"],[27,62,3,60],[27,64,3,62,"height"],[27,70,3,68],[27,72,3,70,"width"],[27,77,3,75],[27,79,3,77,"isMirrored"],[27,89,3,87],[27,91,3,89],[28,4,4,4],[28,10,4,10,"scaleX"],[28,16,4,16],[28,19,4,19,"width"],[28,24,4,24],[28,27,4,27,"videoWidth"],[28,37,4,37],[29,4,5,4],[29,10,5,10,"scaleY"],[29,16,5,16],[29,19,5,19,"viewHeight"],[29,29,5,29],[29,32,5,32,"height"],[29,38,5,38],[30,4,6,4],[30,10,6,10,"mapPoint"],[30,18,6,18],[30,21,6,22,"p"],[30,22,6,23],[30,26,6,28],[31,6,7,8],[31,12,7,14,"x"],[31,13,7,15],[31,16,7,18,"isMirrored"],[31,26,7,28],[31,29,7,31,"width"],[31,34,7,36],[31,37,7,39,"p"],[31,38,7,40],[31,39,7,41,"x"],[31,40,7,42],[31,43,7,45,"scaleX"],[31,49,7,51],[31,52,7,54,"p"],[31,53,7,55],[31,54,7,56,"x"],[31,55,7,57],[31,58,7,60,"scaleX"],[31,64,7,66],[32,6,8,8],[32,12,8,14,"y"],[32,13,8,15],[32,16,8,18,"p"],[32,17,8,19],[32,18,8,20,"y"],[32,19,8,21],[32,22,8,24,"scaleY"],[32,28,8,30],[33,6,9,8],[33,13,9,15],[34,8,9,17,"x"],[34,9,9,18],[35,8,9,20,"y"],[36,6,9,22],[36,7,9,23],[37,4,10,4],[37,5,10,5],[38,4,11,4],[38,10,11,10,"origin"],[38,16,11,16],[38,19,11,19,"mapPoint"],[38,27,11,27],[38,28,11,28,"result"],[38,34,11,34],[38,35,11,35,"bounds"],[38,41,11,41],[38,42,11,42,"origin"],[38,48,11,48],[38,49,11,49],[39,4,12,4],[39,10,12,10,"size"],[39,14,12,14],[39,17,12,17],[40,6,13,8,"width"],[40,11,13,13],[40,13,13,15,"result"],[40,19,13,21],[40,20,13,22,"bounds"],[40,26,13,28],[40,27,13,29,"size"],[40,31,13,33],[40,32,13,34,"width"],[40,37,13,39],[40,40,13,42,"scaleX"],[40,46,13,48],[41,6,14,8,"height"],[41,12,14,14],[41,14,14,16,"result"],[41,20,14,22],[41,21,14,23,"bounds"],[41,27,14,29],[41,28,14,30,"size"],[41,32,14,34],[41,33,14,35,"height"],[41,39,14,41],[41,42,14,44,"scaleY"],[42,4,15,4],[42,5,15,5],[43,4,16,4],[43,8,16,8,"isMirrored"],[43,18,16,18],[43,20,16,20],[44,6,17,8,"origin"],[44,12,17,14],[44,13,17,15,"x"],[44,14,17,16],[44,18,17,20,"size"],[44,22,17,24],[44,23,17,25,"width"],[44,28,17,30],[45,4,18,4],[46,4,19,4],[46,11,19,4,"Object"],[46,17,19,4],[46,18,19,4,"assign"],[46,24,19,4],[46,29,20,11,"result"],[46,35,20,17],[47,6,21,8,"bounds"],[47,12,21,14],[47,14,21,16],[48,8,21,18,"origin"],[48,14,21,24],[49,8,21,26,"size"],[50,6,21,31],[50,7,21,32],[51,6,22,8,"cornerPoints"],[51,18,22,20],[51,20,22,22,"result"],[51,26,22,28],[51,27,22,29,"cornerPoints"],[51,39,22,41],[51,40,22,42,"map"],[51,43,22,45],[51,44,22,46,"mapPoint"],[51,52,22,54],[52,4,22,55],[53,2,24,0],[54,2,25,7],[54,11,25,16,"useWebBarcodeScanner"],[54,31,25,36,"useWebBarcodeScanner"],[54,32,25,37,"video"],[54,37,25,42],[54,39,25,44],[55,4,25,46,"isEnabled"],[55,13,25,55],[56,4,25,57,"barcodeTypes"],[56,16,25,69],[57,4,25,71,"interval"],[57,12,25,79],[58,4,25,81,"isMirrored"],[58,14,25,91],[58,17,25,94],[58,22,25,99],[59,4,25,101,"onScanned"],[59,13,25,110],[60,4,25,112,"onError"],[61,2,25,121],[61,3,25,122],[61,5,25,124],[62,4,26,4],[62,10,26,10,"isRunning"],[62,19,26,19],[62,22,26,22,"React"],[62,27,26,27],[62,28,26,28,"useRef"],[62,34,26,34],[62,35,26,35],[62,40,26,40],[62,41,26,41],[63,4,27,4],[63,10,27,10,"timeout"],[63,17,27,17],[63,20,27,20,"React"],[63,25,27,25],[63,26,27,26,"useRef"],[63,32,27,32],[63,33,27,33,"undefined"],[63,42,27,42],[63,43,27,43],[64,4,28,4],[64,19,28,19,"scanAsync"],[64,28,28,28,"scanAsync"],[64,29,28,28],[64,31,28,31],[65,6,29,8],[65,10,29,12],[65,11,29,13,"isRunning"],[65,20,29,22],[65,21,29,23,"current"],[65,28,29,30],[65,32,29,34],[65,33,29,35,"onScanned"],[65,42,29,44],[65,44,29,46],[66,8,30,12,"stop"],[66,12,30,16],[66,13,30,17],[66,14,30,18],[67,8,31,12],[68,6,32,8],[69,6,33,8],[69,10,33,12],[70,8,34,12],[70,14,34,18,"videoEl"],[70,21,34,25],[70,24,34,28,"video"],[70,29,34,33],[70,30,34,34,"current"],[70,37,34,41],[71,8,35,12],[71,12,35,16],[71,13,35,17,"videoEl"],[71,20,35,24],[71,24,35,28,"videoEl"],[71,31,35,35],[71,32,35,36,"readyState"],[71,42,35,46],[71,47,35,51,"videoEl"],[71,54,35,58],[71,55,35,59,"HAVE_ENOUGH_DATA"],[71,71,35,75],[71,73,35,77],[72,10,36,16],[73,8,37,12],[74,8,38,12],[74,14,38,18],[75,10,38,20,"videoWidth"],[75,20,38,30],[76,10,38,32,"videoHeight"],[77,8,38,44],[77,9,38,45],[77,12,38,48,"videoEl"],[77,19,38,55],[78,8,39,12],[78,12,39,16],[78,13,39,17,"videoWidth"],[78,23,39,27],[78,27,39,31],[78,28,39,32,"videoHeight"],[78,39,39,43],[78,41,39,45],[79,10,40,16],[80,8,41,12],[81,8,42,12],[81,14,42,18,"bitmap"],[81,20,42,24],[81,23,42,27],[81,29,42,33,"createImageBitmap"],[81,46,42,50],[81,47,42,51,"videoEl"],[81,54,42,58],[81,55,42,59],[82,8,43,12],[82,14,43,18,"results"],[82,21,43,25],[82,24,43,28],[82,30,43,34,"WebBarcodeScanner"],[82,47,43,51],[82,48,43,52,"detect"],[82,54,43,58],[82,55,43,59,"bitmap"],[82,61,43,65],[82,63,43,67,"barcodeTypes"],[82,75,43,79],[82,76,43,80],[83,8,44,12,"bitmap"],[83,14,44,18],[83,15,44,19,"close"],[83,20,44,24],[83,21,44,25],[83,22,44,26],[84,8,45,12],[84,14,45,18,"viewWidth"],[84,23,45,27],[84,26,45,30,"videoEl"],[84,33,45,37],[84,34,45,38,"clientWidth"],[84,45,45,49],[84,49,45,53,"videoWidth"],[84,59,45,63],[85,8,46,12],[85,14,46,18,"viewHeight"],[85,24,46,28],[85,27,46,31,"videoEl"],[85,34,46,38],[85,35,46,39,"clientHeight"],[85,47,46,51],[85,51,46,55,"videoHeight"],[85,62,46,66],[86,8,47,12],[86,13,47,17],[86,19,47,23,"raw"],[86,22,47,26],[86,26,47,30,"results"],[86,33,47,37],[86,35,47,39],[87,10,48,16],[87,16,48,22,"nativeEvent"],[87,27,48,33],[87,30,48,36,"mapToViewCoordinates"],[87,50,48,56],[87,51,48,57,"raw"],[87,54,48,60],[87,56,48,62,"videoWidth"],[87,66,48,72],[87,68,48,74,"videoHeight"],[87,79,48,85],[87,81,48,87,"viewWidth"],[87,90,48,96],[87,92,48,98,"viewHeight"],[87,102,48,108],[87,104,48,110,"isMirrored"],[87,114,48,120],[87,115,48,121],[88,10,49,16,"onScanned"],[88,19,49,25],[88,20,49,26],[89,12,49,28,"nativeEvent"],[90,10,49,40],[90,11,49,41],[90,12,49,42],[91,8,50,12],[92,6,51,8],[92,7,51,9],[92,8,52,8],[92,15,52,15,"error"],[92,20,52,20],[92,22,52,22],[93,8,53,12],[93,12,53,16,"onError"],[93,19,53,23],[93,21,53,25],[94,10,54,16,"onError"],[94,17,54,23],[94,18,54,24],[95,12,54,26,"nativeEvent"],[95,23,54,37],[95,25,54,39,"error"],[96,10,54,45],[96,11,54,46],[96,12,54,47],[97,8,55,12],[98,6,56,8],[98,7,56,9],[98,16,57,16],[99,8,58,12],[99,12,58,16,"interval"],[99,20,58,24],[99,25,58,29],[99,26,58,30],[99,28,58,32],[100,10,59,16,"stop"],[100,14,59,20],[100,15,59,21],[100,16,59,22],[101,10,60,16],[102,8,61,12],[103,8,62,12],[103,14,62,18,"intervalToUse"],[103,27,62,31],[103,30,62,34],[103,31,62,35,"interval"],[103,39,62,43],[103,43,62,47,"interval"],[103,51,62,55],[103,54,62,58],[103,55,62,59],[103,58,62,62],[103,60,62,64],[103,63,62,67,"interval"],[103,71,62,75],[104,8,63,12,"timeout"],[104,15,63,19],[104,16,63,20,"current"],[104,23,63,27],[104,26,63,30,"setTimeout"],[104,36,63,40],[104,37,63,41],[104,43,63,47],[105,10,64,16,"scanAsync"],[105,19,64,25],[105,20,64,26],[105,21,64,27],[106,8,65,12],[106,9,65,13],[106,11,65,15,"intervalToUse"],[106,24,65,28],[106,25,65,29],[107,6,66,8],[108,4,67,4],[109,4,68,4],[109,13,68,13,"stop"],[109,17,68,17,"stop"],[109,18,68,17],[109,20,68,20],[110,6,69,8,"isRunning"],[110,15,69,17],[110,16,69,18,"current"],[110,23,69,25],[110,26,69,28],[110,31,69,33],[111,6,70,8,"clearTimeout"],[111,18,70,20],[111,19,70,21,"timeout"],[111,26,70,28],[111,27,70,29,"current"],[111,34,70,36],[111,35,70,37],[112,4,71,4],[113,4,72,4,"React"],[113,9,72,9],[113,10,72,10,"useEffect"],[113,19,72,19],[113,20,72,20],[113,26,72,26],[114,6,73,8],[114,10,73,12,"isEnabled"],[114,19,73,21],[114,21,73,23],[115,8,74,12,"isRunning"],[115,17,74,21],[115,18,74,22,"current"],[115,25,74,29],[115,28,74,32],[115,32,74,36],[116,8,75,12,"scanAsync"],[116,17,75,21],[116,18,75,22],[116,19,75,23],[117,6,76,8],[118,6,77,8],[118,13,77,15],[118,19,77,21],[119,8,78,12],[119,12,78,16,"isEnabled"],[119,21,78,25],[119,23,78,27],[120,10,79,16,"stop"],[120,14,79,20],[120,15,79,21],[120,16,79,22],[121,8,80,12],[122,6,81,8],[122,7,81,9],[123,4,82,4],[123,5,82,5],[123,7,82,7],[123,8,82,8,"isEnabled"],[123,17,82,17],[123,18,82,18],[123,19,82,19],[124,2,83,0],[125,0,83,1],[125,3]],"functionMap":{"names":["<global>","mapToViewCoordinates","mapPoint","useWebBarcodeScanner","scanAsync","setTimeout$argument_0","stop","React.useEffect$argument_0","<anonymous>"],"mappings":"AAA;ACE;qBCG;KDI;CDc;OGC;ICG;yCCmC;aDE;KDE;IGC;KHG;oBIC;eCK;SDI;KJC;CHC"},"hasCjsExports":false},"type":"js/module"}]}